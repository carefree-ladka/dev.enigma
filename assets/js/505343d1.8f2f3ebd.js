"use strict";(self.webpackChunkdev_enigma=self.webpackChunkdev_enigma||[]).push([[69478],{28453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>i});var r=a(96540);const t={},o=r.createContext(t);function s(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(o.Provider,{value:n},e.children)}},30060:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var r=a(74848),t=a(28453);const o={},s="WeakMap, WeakSet, and Generators",i={id:"WebDev/JavaScript/WeakSetWeakMapGenerator",title:"WeakMap, WeakSet, and Generators",description:"WeakMap",source:"@site/docs/WebDev/JavaScript/WeakSetWeakMapGenerator.mdx",sourceDirName:"WebDev/JavaScript",slug:"/WebDev/JavaScript/WeakSetWeakMapGenerator",permalink:"/docs/WebDev/JavaScript/WeakSetWeakMapGenerator",draft:!1,unlisted:!1,editUrl:"https://github.com/carefree-ladka/docs/WebDev/JavaScript/WeakSetWeakMapGenerator.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Tracking the amount of time a user spends on a site",permalink:"/docs/WebDev/JavaScript/TrackTime"},next:{title:"Webpack 5",permalink:"/docs/WebDev/JavaScript/Webpack"}},l={},c=[{value:"WeakMap",id:"weakmap",level:2},{value:"Basic WeakMap Operations",id:"basic-weakmap-operations",level:3},{value:"Memory Management with WeakMap",id:"memory-management-with-weakmap",level:3},{value:"Private Data Pattern",id:"private-data-pattern",level:3},{value:"WeakSet",id:"weakset",level:2},{value:"Basic WeakSet Operations",id:"basic-weakset-operations",level:3},{value:"Use Case: Object Tagging",id:"use-case-object-tagging",level:3},{value:"Generator Functions",id:"generator-functions",level:2},{value:"Basic Generator Syntax",id:"basic-generator-syntax",level:3},{value:"Infinite Sequence Generator",id:"infinite-sequence-generator",level:3},{value:"Generator with Input",id:"generator-with-input",level:3},{value:"Async Generator Pattern",id:"async-generator-pattern",level:3},{value:"Generator Delegation",id:"generator-delegation",level:3},{value:"Advanced Generator Patterns",id:"advanced-generator-patterns",level:3},{value:"Custom Iteration Protocol",id:"custom-iteration-protocol",level:4},{value:"Error Handling in Generators",id:"error-handling-in-generators",level:4},{value:"Generator Pipeline",id:"generator-pipeline",level:4},{value:"Best Practices",id:"best-practices",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"weakmap-weakset-and-generators",children:"WeakMap, WeakSet, and Generators"})}),"\n",(0,r.jsx)(n.h2,{id:"weakmap",children:"WeakMap"}),"\n",(0,r.jsx)(n.p,{children:"WeakMap is a collection of key/value pairs where the keys must be objects and the references to the objects are held weakly."}),"\n",(0,r.jsx)(n.h3,{id:"basic-weakmap-operations",children:"Basic WeakMap Operations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Creating a WeakMap\nconst wm = new WeakMap();\n\n// Adding entries\nlet obj1 = { id: 1 };\nlet obj2 = { id: 2 };\n\nwm.set(obj1, 'Data for object 1');\nwm.set(obj2, 'Data for object 2');\n\n// Retrieving values\nconsole.log(wm.get(obj1)); // 'Data for object 1'\n\n// Checking existence\nconsole.log(wm.has(obj1)); // true\n\n// Deleting entries\nwm.delete(obj1);\nconsole.log(wm.has(obj1)); // false\n"})}),"\n",(0,r.jsx)(n.h3,{id:"memory-management-with-weakmap",children:"Memory Management with WeakMap"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const cache = new WeakMap();\n\nfunction processObject(obj) {\n  if (cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  const result = expensiveOperation(obj);\n  cache.set(obj, result);\n  return result;\n}\n\nlet user = { id: 1 };\nprocessObject(user);\n\n// When user is set to null and no other references exist\nuser = null;\n// The WeakMap entry is eligible for garbage collection\n"})}),"\n",(0,r.jsx)(n.h3,{id:"private-data-pattern",children:"Private Data Pattern"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const privateData = new WeakMap();\n\nclass User {\n  constructor(name, age) {\n    privateData.set(this, {\n      name,\n      age,\n    });\n  }\n\n  getName() {\n    return privateData.get(this).name;\n  }\n\n  getAge() {\n    return privateData.get(this).age;\n  }\n}\n\nconst user = new User('John', 30);\nconsole.log(user.getName()); // 'John'\n// privateData.get(user) is not accessible outside the class\n"})}),"\n",(0,r.jsx)(n.h2,{id:"weakset",children:"WeakSet"}),"\n",(0,r.jsx)(n.p,{children:"WeakSet is a collection of objects stored in a set where references to the objects are held weakly."}),"\n",(0,r.jsx)(n.h3,{id:"basic-weakset-operations",children:"Basic WeakSet Operations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Creating a WeakSet\nconst ws = new WeakSet();\n\n// Adding objects\nlet obj1 = { id: 1 };\nlet obj2 = { id: 2 };\n\nws.add(obj1);\nws.add(obj2);\n\n// Checking membership\nconsole.log(ws.has(obj1)); // true\n\n// Removing objects\nws.delete(obj1);\nconsole.log(ws.has(obj1)); // false\n"})}),"\n",(0,r.jsx)(n.h3,{id:"use-case-object-tagging",children:"Use Case: Object Tagging"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const processedItems = new WeakSet();\n\nfunction processItem(item) {\n  if (processedItems.has(item)) {\n    console.log('Already processed');\n    return;\n  }\n\n  // Process the item\n  console.log('Processing item:', item);\n  processedItems.add(item);\n}\n\nlet item = { data: 'example' };\nprocessItem(item); // Processing item: { data: 'example' }\nprocessItem(item); // Already processed\n"})}),"\n",(0,r.jsx)(n.h2,{id:"generator-functions",children:"Generator Functions"}),"\n",(0,r.jsx)(n.p,{children:"Generators are functions that can be paused and resumed, yielding multiple values over time."}),"\n",(0,r.jsx)(n.h3,{id:"basic-generator-syntax",children:"Basic Generator Syntax"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"function* numberGenerator() {\n  yield 1;\n  yield 2;\n  yield 3;\n}\n\nconst gen = numberGenerator();\nconsole.log(gen.next()); // { value: 1, done: false }\nconsole.log(gen.next()); // { value: 2, done: false }\nconsole.log(gen.next()); // { value: 3, done: false }\nconsole.log(gen.next()); // { value: undefined, done: true }\n"})}),"\n",(0,r.jsx)(n.h3,{id:"infinite-sequence-generator",children:"Infinite Sequence Generator"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"function* infiniteSequence() {\n  let i = 0;\n  while (true) {\n    yield i++;\n  }\n}\n\nconst numbers = infiniteSequence();\nconsole.log(numbers.next().value); // 0\nconsole.log(numbers.next().value); // 1\n// ...continues infinitely\n"})}),"\n",(0,r.jsx)(n.h3,{id:"generator-with-input",children:"Generator with Input"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"function* conversation() {\n  const name = yield \"What's your name?\";\n  const age = yield `Hello ${name}, how old are you?`;\n  return `${name} is ${age} years old`;\n}\n\nconst conv = conversation();\nconsole.log(conv.next().value); // What's your name?\nconsole.log(conv.next('John').value); // Hello John, how old are you?\nconsole.log(conv.next('30').value); // John is 30 years old\n"})}),"\n",(0,r.jsx)(n.h3,{id:"async-generator-pattern",children:"Async Generator Pattern"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"async function* asyncGenerator() {\n  let i = 0;\n  while (i < 3) {\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    yield i++;\n  }\n}\n\nasync function runGenerator() {\n  for await (const value of asyncGenerator()) {\n    console.log(value); // Logs 0, 1, 2 with 1-second delays\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"generator-delegation",children:"Generator Delegation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"function* generator1() {\n  yield 1;\n  yield 2;\n}\n\nfunction* generator2() {\n  yield* generator1();\n  yield 3;\n}\n\nconst gen = generator2();\nfor (const value of gen) {\n  console.log(value); // 1, 2, 3\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"advanced-generator-patterns",children:"Advanced Generator Patterns"}),"\n",(0,r.jsx)(n.h4,{id:"custom-iteration-protocol",children:"Custom Iteration Protocol"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"class CustomIterable {\n  *[Symbol.iterator]() {\n    yield 1;\n    yield 2;\n    yield 3;\n  }\n}\n\nconst iterable = new CustomIterable();\nfor (const value of iterable) {\n  console.log(value); // 1, 2, 3\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"error-handling-in-generators",children:"Error Handling in Generators"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"function* errorGenerator() {\n  try {\n    yield 1;\n    yield 2;\n    yield 3;\n  } catch (error) {\n    console.log('Error caught:', error);\n    yield 'Error handled';\n  }\n}\n\nconst gen = errorGenerator();\nconsole.log(gen.next()); // { value: 1, done: false }\nconsole.log(gen.throw(new Error('Test error'))); // Logs error and returns { value: 'Error handled', done: false }\n"})}),"\n",(0,r.jsx)(n.h4,{id:"generator-pipeline",children:"Generator Pipeline"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"function* filter(numbers, predicate) {\n  for (const number of numbers) {\n    if (predicate(number)) {\n      yield number;\n    }\n  }\n}\n\nfunction* map(numbers, transform) {\n  for (const number of numbers) {\n    yield transform(number);\n  }\n}\n\n// Usage\nconst numbers = [1, 2, 3, 4, 5];\nconst pipeline = map(\n  filter(numbers, n => n % 2 === 0),\n  n => n * 2\n);\n\nfor (const value of pipeline) {\n  console.log(value); // 4, 8\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Memory Management"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Good: WeakMap for caching\nconst cache = new WeakMap();\nfunction cached(obj) {\n  if (cache.has(obj)) return cache.get(obj);\n  const result = expensive(obj);\n  cache.set(obj, result);\n  return result;\n}\n\n// Bad: Using Map for object references\nconst cache = new Map(); // Memory leak potential\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Generator Function Naming"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Good: Clear naming convention\nfunction* generateUserIds() {\n  let id = 1;\n  while (true) {\n    yield `USER_${id++}`;\n  }\n}\n\n// Bad: Unclear purpose\nfunction* gen() {\n  // ...\n}\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"Error Handling"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"async function* safeGenerator() {\n  try {\n    yield* riskyOperation();\n  } catch (error) {\n    yield { error: error.message };\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"These features provide powerful tools for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Memory-efficient caching (WeakMap)"}),"\n",(0,r.jsx)(n.li,{children:"Object lifetime tracking (WeakSet)"}),"\n",(0,r.jsx)(n.li,{children:"Lazy evaluation (Generators)"}),"\n",(0,r.jsx)(n.li,{children:"Custom iteration protocols"}),"\n",(0,r.jsx)(n.li,{children:"Asynchronous data streams"}),"\n",(0,r.jsx)(n.li,{children:"Complex control flow patterns"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Remember that WeakMap and WeakSet are specifically designed for memory management scenarios, while Generators excel at handling sequences and asynchronous operations."})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);