"use strict";(self.webpackChunkdev_enigma=self.webpackChunkdev_enigma||[]).push([[2024],{9713:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>a});var s=o(74848),l=o(28453);const r={title:"Promise Based Outputs"},i="Understanding Micro Queue and Macro Queue in JavaScript",t={id:"WebDev/JavaScript/PromiseBased",title:"Promise Based Outputs",description:"In JavaScript, the concepts of Micro Queue and Macro Queue (also known as the Task Queue) refer to different types of queues that manage the execution of asynchronous tasks. Understanding these queues helps clarify how the event loop processes different types of operations.",source:"@site/docs/WebDev/JavaScript/PromiseBased.mdx",sourceDirName:"WebDev/JavaScript",slug:"/WebDev/JavaScript/PromiseBased",permalink:"/dev.enigma/docs/WebDev/JavaScript/PromiseBased",draft:!1,unlisted:!1,editUrl:"https://github.com/carefree-ladka/docs/WebDev/JavaScript/PromiseBased.mdx",tags:[],version:"current",frontMatter:{title:"Promise Based Outputs"},sidebar:"tutorialSidebar",previous:{title:"Array Methods Polyfills",permalink:"/dev.enigma/docs/WebDev/JavaScript/Polyfills"},next:{title:"Promise Fundamentals",permalink:"/dev.enigma/docs/WebDev/JavaScript/PromisePolyfills"}},c={},a=[{value:"Macro Queue (Task Queue)",id:"macro-queue-task-queue",level:2},{value:"Micro Queue (Job Queue)",id:"micro-queue-job-queue",level:2},{value:"Execution Order",id:"execution-order",level:2},{value:"Summary",id:"summary",level:2},{value:"Problem 1",id:"problem-1",level:3},{value:"Problem 2",id:"problem-2",level:3},{value:"Problem 3",id:"problem-3",level:3},{value:"Problem 4",id:"problem-4",level:3},{value:"Problem 5",id:"problem-5",level:3},{value:"Problem 6",id:"problem-6",level:3},{value:"Problem 7",id:"problem-7",level:3},{value:"Problem 8",id:"problem-8",level:3},{value:"Problem 9",id:"problem-9",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"understanding-micro-queue-and-macro-queue-in-javascript",children:"Understanding Micro Queue and Macro Queue in JavaScript"})}),"\n",(0,s.jsxs)(n.p,{children:["In JavaScript, the concepts of ",(0,s.jsx)(n.strong,{children:"Micro Queue"})," and ",(0,s.jsx)(n.strong,{children:"Macro Queue"})," (also known as the Task Queue) refer to different types of queues that manage the execution of asynchronous tasks. Understanding these queues helps clarify how the event loop processes different types of operations."]}),"\n",(0,s.jsx)(n.h2,{id:"macro-queue-task-queue",children:"Macro Queue (Task Queue)"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"Macro Queue"})," contains tasks that are generally scheduled by APIs (like ",(0,s.jsx)(n.code,{children:"setTimeout"}),", ",(0,s.jsx)(n.code,{children:"setInterval"}),", or I/O operations). Tasks in this queue are executed one at a time in the order they were added. After all currently executing code has completed and any microtasks in the Micro Queue have been processed, the next task from the Macro Queue is executed."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Examples of tasks in the Macro Queue include:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"setTimeout"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"setInterval"})}),"\n",(0,s.jsx)(n.li,{children:"I/O operations (e.g., file reading)"}),"\n",(0,s.jsx)(n.li,{children:"Event handlers"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"micro-queue-job-queue",children:"Micro Queue (Job Queue)"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"Micro Queue"}),", on the other hand, is used for more granular operations that need to occur after the currently executing script but before the next task from the Macro Queue. This queue is processed immediately after the execution of the currently running script and before any tasks from the Macro Queue are executed."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Examples of operations in the Micro Queue include:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Promises (",(0,s.jsx)(n.code,{children:"Promise.then"}),", ",(0,s.jsx)(n.code,{children:"Promise.catch"}),", ",(0,s.jsx)(n.code,{children:"Promise.finally"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"Mutation Observers"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"queueMicrotask()"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"execution-order",children:"Execution Order"}),"\n",(0,s.jsx)(n.p,{children:"When the JavaScript event loop runs, it follows this general order:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Execute the currently running code (main stack)."}),"\n",(0,s.jsxs)(n.li,{children:["Process all tasks in the ",(0,s.jsx)(n.strong,{children:"Micro Queue"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["If there are no more microtasks, process the next task in the ",(0,s.jsx)(n.strong,{children:"Macro Queue"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Repeat the process."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Macro Queue"}),": Contains tasks like ",(0,s.jsx)(n.code,{children:"setTimeout"}),", ",(0,s.jsx)(n.code,{children:"setInterval"}),", and I/O tasks; processed after the Micro Queue."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Micro Queue"}),": Contains promise callbacks and other high-priority tasks; processed immediately after the current execution context."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"problem-1",children:"Problem 1"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JavaScript",children:'console.log("Start");\n\nsetTimeout(() => {\n  console.log("Timeout 1");\n}, 0);\n\nPromise.resolve().then(() => {\n  console.log("Promise 1");\n}).then(() => {\n  console.log("Promise 2");\n});\n\nsetTimeout(() => {\n  console.log("Timeout 2");\n}, 0);\n\nconsole.log("End");\n\n/*\nStart\nEnd\nPromise 1\nPromise 2\nTimeout 1\nTimeout 2\n*/\n'})}),"\n",(0,s.jsx)(n.h3,{id:"problem-2",children:"Problem 2"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JavaScript",children:'function callbackExample(cb) {\n  console.log("Callback Start");\n  cb();\n  console.log("Callback End");\n}\n\nconsole.log("Start");\n\nsetTimeout(() => {\n  console.log("Timeout 1");\n\n  Promise.resolve().then(() => {\n    console.log("Promise inside Timeout 1");\n  });\n\n  callbackExample(() => {\n    console.log("Callback inside Timeout 1");\n  });\n}, 0);\n\nPromise.resolve().then(() => {\n  console.log("Promise 1");\n\n  setTimeout(() => {\n    console.log("Timeout inside Promise 1");\n\n    callbackExample(() => {\n      console.log("Callback inside Timeout from Promise 1");\n    });\n  }, 0);\n\n}).then(() => {\n  console.log("Promise 2");\n});\n\nsetTimeout(() => {\n  console.log("Timeout 2");\n\n  callbackExample(() => {\n    console.log("Callback inside Timeout 2");\n  });\n\n  Promise.resolve().then(() => {\n    console.log("Promise inside Timeout 2");\n  });\n}, 0);\n\nconsole.log("End");\n\n/*\nStart\nEnd\nPromise 1\nPromise 2\nTimeout 1\nCallback Start\nCallback inside Timeout 1\nCallback End\nPromise inside Timeout 1\nTimeout 2\nCallback Start\nCallback inside Timeout 2\nCallback End\nPromise inside Timeout 2\nTimeout inside Promise 1\nCallback Start\nCallback inside Timeout from Promise 1\nCallback End\n*/\n'})}),"\n",(0,s.jsx)(n.h3,{id:"problem-3",children:"Problem 3"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JavaScript",children:"console.log('console1');\n\nsetTimeout(() => {\n  console.log('setTimeout1');\n  Promise.resolve().then(() => {\n    console.log('Promise1');\n  })\n}, 0)\n\nnew Promise((resolve) => {\n  console.log('Promise 1');\n  setTimeout(() => {\n    resolve('resolve 1')\n  }, 0)\n}).then((res) => {\n  console.log('resolved 2');\n  setTimeout(() => {\n    console.log(res);\n  }, 0)\n})\n\n/*\nconsole1\nPromise 1\nsetTimeout1\nPromise1\nresolved 2\nresolve 1\n*/\n"})}),"\n",(0,s.jsx)(n.h3,{id:"problem-4",children:"Problem 4"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JavaScript",children:"console.log(1);\n\nsetTimeout(() => {\n  console.log(3);\n  Promise.resolve().then(() => console.log(4))\n}, 0)\n\nPromise.resolve().then(() => {\n  console.log(5);\n  setTimeout(() => {\n    console.log(7);\n  }, 0)\n})\n\nconsole.log(6);\n\n/*\n1\n6\n5\n3\n4\n7\n*/\n"})}),"\n",(0,s.jsx)(n.h3,{id:"problem-5",children:"Problem 5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JavaScript",children:'console.log("A");\n\nsetTimeout(() => console.log("B"), 0);\n\nPromise.resolve()\n  .then(() => console.log("C"))\n  .then(() => console.log("D"));\n\nconsole.log("E");\n/*\nA\nE\nC\nD\nB\n*/\n'})}),"\n",(0,s.jsx)(n.h3,{id:"problem-6",children:"Problem 6"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JavaScript",children:'setTimeout(() => console.log("1"), 0);\n\nPromise.resolve().then(() => {\n  console.log("2");\n  setTimeout(() => console.log("3"), 0);\n});\n\nconsole.log("4");\n/*\n4\n2\n1\n3\n */\n'})}),"\n",(0,s.jsx)(n.h3,{id:"problem-7",children:"Problem 7"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JavaScript",children:'setTimeout(() => console.log("X"), 0);\n\nPromise.resolve()\n  .then(() => console.log("Y"))\n  .then(() => {\n    console.log("Z");\n    setTimeout(() => console.log("W"), 0);\n  });\n\nconsole.log("Q");\n\n/*\nQ\nY\nZ\nX\nW\n*/\n'})}),"\n",(0,s.jsx)(n.h3,{id:"problem-8",children:"Problem 8"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JavaScript",children:'setTimeout(() => {\n  console.log("A");\n  Promise.resolve().then(() => console.log("B"));\n}, 0);\n\nPromise.resolve().then(() => {\n  console.log("C");\n  setTimeout(() => console.log("D"), 0);\n});\n\nconsole.log("E");\n\n/*\nE\nC\nA\nB\nD\n*/\n'})}),"\n",(0,s.jsx)(n.h3,{id:"problem-9",children:"Problem 9"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JavaScript",children:'Promise.resolve()\n  .then(() => {\n    console.log("A");\n    return Promise.resolve();\n  })\n  .then(() => {\n    console.log("B");\n    return Promise.resolve();\n  })\n  .then(() => console.log("C"));\n\nsetTimeout(() => console.log("D"), 0);\n\nconsole.log("E");\n\n/*\nE\nA\nB\nC\nD\n */\n'})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>t});var s=o(96540);const l={},r=s.createContext(l);function i(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);