"use strict";(self.webpackChunkdev_enigma=self.webpackChunkdev_enigma||[]).push([[8040],{28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>c});var l=i(96540);const t={},r=l.createContext(t);function s(e){const n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),l.createElement(r.Provider,{value:n},e.children)}},31673:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var l=i(74848),t=i(28453);const r={},s="React Internals: JSX, Reconciliation & Virtual DOM",c={id:"Interview Prep 2026/React Internals: JSX, Reconciliation & Virtual DOM",title:"React Internals: JSX, Reconciliation & Virtual DOM",description:"A deep dive into how React works under the hood, with visual diagrams and practical examples.",source:"@site/docs/08-Interview Prep 2026/React Internals: JSX, Reconciliation & Virtual DOM.mdx",sourceDirName:"08-Interview Prep 2026",slug:"/Interview Prep 2026/React Internals: JSX, Reconciliation & Virtual DOM",permalink:"/docs/Interview Prep 2026/React Internals: JSX, Reconciliation & Virtual DOM",draft:!1,unlisted:!1,editUrl:"https://github.com/carefree-ladka/docs/08-Interview Prep 2026/React Internals: JSX, Reconciliation & Virtual DOM.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Modern CSS Guide 2026",permalink:"/docs/Interview Prep 2026/Modern CSS Guide 2026"},next:{title:"React Lifecycle Methods & Hooks - Complete Interview Guide",permalink:"/docs/Interview Prep 2026/React Lifecycle Methods & Hooks - Complete Interview Guide"}},a={},d=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"1. JSX \u2192 React.createElement",id:"1-jsx--reactcreateelement",level:2},{value:"JSX Transformation Example",id:"jsx-transformation-example",level:3},{value:"React.createElement Signature",id:"reactcreateelement-signature",level:3},{value:"Complex Example",id:"complex-example",level:3},{value:"What React.createElement Returns",id:"what-reactcreateelement-returns",level:3},{value:"JSX Compilation Flow",id:"jsx-compilation-flow",level:3},{value:"2. Virtual DOM vs Real DOM",id:"2-virtual-dom-vs-real-dom",level:2},{value:"Real DOM vs Virtual DOM",id:"real-dom-vs-virtual-dom",level:3},{value:"Virtual DOM Structure",id:"virtual-dom-structure",level:3},{value:"Example: Virtual DOM Object",id:"example-virtual-dom-object",level:3},{value:"3. Diffing Algorithm",id:"3-diffing-algorithm",level:2},{value:"Diffing Heuristics",id:"diffing-heuristics",level:3},{value:"Type Change Example",id:"type-change-example",level:3},{value:"Same Type Diffing",id:"same-type-diffing",level:3},{value:"4. Keys and List Reconciliation",id:"4-keys-and-list-reconciliation",level:2},{value:"Without Keys (Bad)",id:"without-keys-bad",level:3},{value:"With Keys (Good)",id:"with-keys-good",level:3},{value:"Key Rules",id:"key-rules",level:3},{value:"5. Reconciliation Process",id:"5-reconciliation-process",level:2},{value:"High-Level Reconciliation Flow",id:"high-level-reconciliation-flow",level:3},{value:"Step-by-Step Example",id:"step-by-step-example",level:3},{value:"Reconciliation Phases",id:"reconciliation-phases",level:3},{value:"6. Fiber Architecture",id:"6-fiber-architecture",level:2},{value:"What is a Fiber?",id:"what-is-a-fiber",level:3},{value:"Fiber Tree Structure",id:"fiber-tree-structure",level:3},{value:"Work Loop",id:"work-loop",level:3},{value:"Why Fiber?",id:"why-fiber",level:3},{value:"7. Putting It All Together",id:"7-putting-it-all-together",level:2},{value:"Complete React Update Cycle",id:"complete-react-update-cycle",level:3},{value:"Real-World Example",id:"real-world-example",level:3},{value:"8. Performance Implications",id:"8-performance-implications",level:2},{value:"Best Practices",id:"best-practices",level:3},{value:"Summary",id:"summary",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"react-internals-jsx-reconciliation--virtual-dom",children:"React Internals: JSX, Reconciliation & Virtual DOM"})}),"\n",(0,l.jsx)(n.p,{children:"A deep dive into how React works under the hood, with visual diagrams and practical examples."}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"#1-jsx--reactcreateelement",children:"JSX \u2192 React.createElement"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"JSX Transformation Example"}),"\n",(0,l.jsx)(n.li,{children:"React.createElement Signature"}),"\n",(0,l.jsx)(n.li,{children:"Complex Example"}),"\n",(0,l.jsx)(n.li,{children:"What React.createElement Returns"}),"\n",(0,l.jsx)(n.li,{children:"JSX Compilation Flow"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"#2-virtual-dom-vs-real-dom",children:"Virtual DOM vs Real DOM"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Real DOM vs Virtual DOM Comparison"}),"\n",(0,l.jsx)(n.li,{children:"Virtual DOM Structure"}),"\n",(0,l.jsx)(n.li,{children:"Example: Virtual DOM Object"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"#3-diffing-algorithm",children:"Diffing Algorithm"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Diffing Heuristics"}),"\n",(0,l.jsx)(n.li,{children:"Type Change Example"}),"\n",(0,l.jsx)(n.li,{children:"Same Type Diffing"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"#4-keys-and-list-reconciliation",children:"Keys and List Reconciliation"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Without Keys (Bad)"}),"\n",(0,l.jsx)(n.li,{children:"With Keys (Good)"}),"\n",(0,l.jsx)(n.li,{children:"Key Rules"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"#5-reconciliation-process",children:"Reconciliation Process"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"High-Level Reconciliation Flow"}),"\n",(0,l.jsx)(n.li,{children:"Step-by-Step Example"}),"\n",(0,l.jsx)(n.li,{children:"Reconciliation Phases"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"#6-fiber-architecture",children:"Fiber Architecture"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"What is a Fiber?"}),"\n",(0,l.jsx)(n.li,{children:"Fiber Tree Structure"}),"\n",(0,l.jsx)(n.li,{children:"Work Loop"}),"\n",(0,l.jsx)(n.li,{children:"Why Fiber?"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"#7-putting-it-all-together",children:"Putting It All Together"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Complete React Update Cycle"}),"\n",(0,l.jsx)(n.li,{children:"Real-World Example"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"#8-performance-implications",children:"Performance Implications"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Best Practices"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"#summary",children:"Summary"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"1-jsx--reactcreateelement",children:"1. JSX \u2192 React.createElement"}),"\n",(0,l.jsxs)(n.p,{children:["JSX is syntactic sugar that gets transformed into ",(0,l.jsx)(n.code,{children:"React.createElement"})," calls during the build process."]}),"\n",(0,l.jsx)(n.h3,{id:"jsx-transformation-example",children:"JSX Transformation Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-jsx",children:"// What you write:\nconst element = <div className=\"container\">Hello World</div>;\n\n// What it becomes:\nconst element = React.createElement(\n  'div',\n  { className: 'container' },\n  'Hello World'\n);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"reactcreateelement-signature",children:"React.createElement Signature"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"React.createElement(type, props, ...children)\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"type"}),": String (HTML tag) or Component (function/class)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"props"}),": Object with properties (null if none)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"children"}),": Child elements or text"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"complex-example",children:"Complex Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-jsx",children:"// JSX:\n<div className=\"card\">\n  <h1>Title</h1>\n  <p>Description</p>\n  <Button onClick={handleClick}>Click me</Button>\n</div>\n\n// Transformed to:\nReact.createElement(\n  'div',\n  { className: 'card' },\n  React.createElement('h1', null, 'Title'),\n  React.createElement('p', null, 'Description'),\n  React.createElement(\n    Button,\n    { onClick: handleClick },\n    'Click me'\n  )\n);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"what-reactcreateelement-returns",children:"What React.createElement Returns"}),"\n",(0,l.jsxs)(n.p,{children:["It returns a ",(0,l.jsx)(n.strong,{children:"React Element"})," - a plain JavaScript object:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"{\n  type: 'div',\n  props: {\n    className: 'card',\n    children: [\n      { type: 'h1', props: { children: 'Title' } },\n      { type: 'p', props: { children: 'Description' } },\n      { type: Button, props: { onClick: fn, children: 'Click me' } }\n    ]\n  },\n  key: null,\n  ref: null,\n  $$typeof: Symbol.for('react.element')\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"jsx-compilation-flow",children:"JSX Compilation Flow"}),"\n",(0,l.jsx)(n.mermaid,{value:"graph LR\n    A[JSX Code] --\x3e|Babel/Compiler| B[React.createElement calls]\n    B --\x3e|Runtime| C[React Elements]\n    C --\x3e|React Renderer| D[Fiber Nodes]\n    D --\x3e|Reconciliation| E[DOM Updates]"}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"2-virtual-dom-vs-real-dom",children:"2. Virtual DOM vs Real DOM"}),"\n",(0,l.jsx)(n.p,{children:"The Virtual DOM is React's lightweight representation of the actual DOM."}),"\n",(0,l.jsx)(n.h3,{id:"real-dom-vs-virtual-dom",children:"Real DOM vs Virtual DOM"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Aspect"}),(0,l.jsx)(n.th,{children:"Real DOM"}),(0,l.jsx)(n.th,{children:"Virtual DOM"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Nature"})}),(0,l.jsx)(n.td,{children:"Browser's actual DOM tree"}),(0,l.jsx)(n.td,{children:"JavaScript object representation"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Updates"})}),(0,l.jsx)(n.td,{children:"Expensive (triggers reflow/repaint)"}),(0,l.jsx)(n.td,{children:"Cheap (just object manipulation)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Speed"})}),(0,l.jsx)(n.td,{children:"Slow for frequent updates"}),(0,l.jsx)(n.td,{children:"Fast diffing and batching"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Memory"})}),(0,l.jsx)(n.td,{children:"Heavy"}),(0,l.jsx)(n.td,{children:"Lightweight"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"virtual-dom-structure",children:"Virtual DOM Structure"}),"\n",(0,l.jsx)(n.mermaid,{value:"graph TD\n    A[Virtual DOM Tree] --\x3e B[div#root]\n    B --\x3e C[div.container]\n    C --\x3e D[h1 'Hello']\n    C --\x3e E[ul]\n    E --\x3e F[li 'Item 1']\n    E --\x3e G[li 'Item 2']\n\n    style A fill:#e1f5ff\n    style B fill:#fff4e1\n    style C fill:#ffe1e1"}),"\n",(0,l.jsx)(n.h3,{id:"example-virtual-dom-object",children:"Example: Virtual DOM Object"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"// Virtual DOM representation\n{\n  type: 'div',\n  props: {\n    className: 'container',\n    children: [\n      {\n        type: 'h1',\n        props: { children: 'Hello' }\n      },\n      {\n        type: 'ul',\n        props: {\n          children: [\n            { type: 'li', props: { children: 'Item 1' } },\n            { type: 'li', props: { children: 'Item 2' } }\n          ]\n        }\n      }\n    ]\n  }\n}\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"3-diffing-algorithm",children:"3. Diffing Algorithm"}),"\n",(0,l.jsx)(n.p,{children:"React uses a heuristic O(n) algorithm instead of the traditional O(n\xb3) tree diffing."}),"\n",(0,l.jsx)(n.h3,{id:"diffing-heuristics",children:"Diffing Heuristics"}),"\n",(0,l.jsx)(n.p,{children:"React makes two assumptions:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Different types produce different trees"})," - If element type changes, rebuild from scratch"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Keys identify which children have changed"})," - Use keys to match elements across renders"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"type-change-example",children:"Type Change Example"}),"\n",(0,l.jsx)(n.mermaid,{value:"graph LR\n    subgraph \"Old Tree\"\n    A1[div] --\x3e B1[span 'Hello']\n    end\n\n    subgraph \"New Tree\"\n    A2[p] --\x3e B2[span 'Hello']\n    end\n\n    A1 -.->|Type Changed| A2\n\n    style A1 fill:#ffcccc\n    style A2 fill:#ccffcc"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Result"}),": Entire subtree is destroyed and rebuilt because ",(0,l.jsx)(n.code,{children:"div"})," \u2192 ",(0,l.jsx)(n.code,{children:"p"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-jsx",children:"// Before:\n<div><span>Hello</span></div>\n\n// After:\n<p><span>Hello</span></p>\n\n// React destroys div and span, creates new p and span\n"})}),"\n",(0,l.jsx)(n.h3,{id:"same-type-diffing",children:"Same Type Diffing"}),"\n",(0,l.jsx)(n.mermaid,{value:"graph TD\n    subgraph \"Old\"\n    A1[div.old] --\x3e B1[span 'Text']\n    end\n\n    subgraph \"New\"\n    A2[div.new] --\x3e B2[span 'Text']\n    end\n\n    A1 -.->|Update Props| A2\n    B1 -.->|Keep| B2\n\n    style A1 fill:#fff4cc\n    style A2 fill:#ccffcc"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Result"}),": Keep the DOM node, update only changed attributes"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-jsx",children:"// Before:\n<div className=\"old\" style={{color: 'red'}}>Text</div>\n\n// After:\n<div className=\"new\" style={{color: 'blue'}}>Text</div>\n\n// React only updates className and style, keeps the DOM node\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"4-keys-and-list-reconciliation",children:"4. Keys and List Reconciliation"}),"\n",(0,l.jsx)(n.p,{children:"Keys help React identify which items have changed, been added, or removed."}),"\n",(0,l.jsx)(n.h3,{id:"without-keys-bad",children:"Without Keys (Bad)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-jsx",children:"// Initial render:\n<ul>\n  <li>Alice</li>\n  <li>Bob</li>\n</ul>\n\n// After adding Charlie at the beginning:\n<ul>\n  <li>Charlie</li>\n  <li>Alice</li>\n  <li>Bob</li>\n</ul>\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"What React does"}),": Updates all three ",(0,l.jsx)(n.code,{children:"<li>"})," elements (inefficient!)"]}),"\n",(0,l.jsx)(n.mermaid,{value:'graph LR\n    subgraph "Before"\n    A1[li: Alice] --\x3e A2[li: Bob]\n    end\n\n    subgraph "After"\n    B1[li: Charlie] --\x3e B2[li: Alice] --\x3e B3[li: Bob]\n    end\n\n    A1 -.->|Update to Charlie| B1\n    A2 -.->|Update to Alice| B2\n    B3[li: Bob]\n\n    style B1 fill:#ffcccc\n    style B2 fill:#ffcccc\n    style B3 fill:#ccffcc'}),"\n",(0,l.jsx)(n.h3,{id:"with-keys-good",children:"With Keys (Good)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-jsx",children:'// Initial render:\n<ul>\n  <li key="alice">Alice</li>\n  <li key="bob">Bob</li>\n</ul>\n\n// After adding Charlie:\n<ul>\n  <li key="charlie">Charlie</li>\n  <li key="alice">Alice</li>\n  <li key="bob">Bob</li>\n</ul>\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"What React does"}),": Recognizes Alice and Bob unchanged, only inserts Charlie"]}),"\n",(0,l.jsx)(n.mermaid,{value:'graph LR\n    subgraph "Before"\n    A1[li key=alice] --\x3e A2[li key=bob]\n    end\n\n    subgraph "After"\n    B1[li key=charlie] --\x3e B2[li key=alice] --\x3e B3[li key=bob]\n    end\n\n    A1 -.->|Move| B2\n    A2 -.->|Move| B3\n    B1[NEW]\n\n    style B1 fill:#ccffcc\n    style B2 fill:#ccccff\n    style B3 fill:#ccccff'}),"\n",(0,l.jsx)(n.h3,{id:"key-rules",children:"Key Rules"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-jsx",children:"// \u2705 Good: Stable, unique keys\nitems.map(item => <div key={item.id}>{item.name}</div>)\n\n// \u274c Bad: Index as key (unstable when reordering)\nitems.map((item, index) => <div key={index}>{item.name}</div>)\n\n// \u274c Bad: Random keys (creates new elements every render)\nitems.map(item => <div key={Math.random()}>{item.name}</div>)\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"5-reconciliation-process",children:"5. Reconciliation Process"}),"\n",(0,l.jsx)(n.p,{children:"Reconciliation is the algorithm React uses to diff one tree with another to determine what needs to change."}),"\n",(0,l.jsx)(n.h3,{id:"high-level-reconciliation-flow",children:"High-Level Reconciliation Flow"}),"\n",(0,l.jsx)(n.mermaid,{value:"graph TD\n    A[State/Props Change] --\x3e B[Re-render Component]\n    B --\x3e C[Create New Virtual DOM]\n    C --\x3e D[Diff with Old Virtual DOM]\n    D --\x3e E{Changes Found?}\n    E --\x3e|Yes| F[Create Update Queue]\n    E --\x3e|No| G[Do Nothing]\n    F --\x3e H[Batch Updates]\n    H --\x3e I[Commit to Real DOM]\n\n    style A fill:#ffcccc\n    style C fill:#cce5ff\n    style D fill:#ffffcc\n    style I fill:#ccffcc"}),"\n",(0,l.jsx)(n.h3,{id:"step-by-step-example",children:"Step-by-Step Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-jsx",children:"function Counter() {\n  const [count, setCount] = useState(0);\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={() => setCount(count + 1)}>+</button>\n    </div>\n  );\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Step 1: Initial Render"})}),"\n",(0,l.jsx)(n.mermaid,{value:"graph TD\n    A[Counter Component] --\x3e B[Virtual DOM]\n    B --\x3e C[div]\n    C --\x3e D[\"p: 'Count: 0'\"]\n    C --\x3e E[\"button: '+'\"]\n    B --\x3e F[Real DOM]\n    F --\x3e G[div]\n    G --\x3e H[\"p: 'Count: 0'\"]\n    G --\x3e I[\"button: '+'\"]"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Step 2: State Update (count = 1)"})}),"\n",(0,l.jsx)(n.mermaid,{value:"graph TD\n    A[setCount Called] --\x3e B[New Virtual DOM]\n    B --\x3e C[div]\n    C --\x3e D[\"p: 'Count: 1'\"]\n    C --\x3e E[\"button: '+'\"]\n\n    B --\x3e F[Diff Algorithm]\n    F --\x3e G{Compare Trees}\n    G --\x3e|div: Same| H[Keep]\n    G --\x3e|p text: Changed| I[Update Text Node]\n    G --\x3e|button: Same| J[Keep]\n\n    I --\x3e K[DOM Update]\n    K --\x3e L[Only update text content of p]\n\n    style A fill:#ffcccc\n    style F fill:#ffffcc\n    style L fill:#ccffcc"}),"\n",(0,l.jsx)(n.h3,{id:"reconciliation-phases",children:"Reconciliation Phases"}),"\n",(0,l.jsxs)(n.p,{children:["React 16+ uses ",(0,l.jsx)(n.strong,{children:"Fiber architecture"})," with two phases:"]}),"\n",(0,l.jsx)(n.mermaid,{value:"graph LR\n    A[Render Phase] --\x3e|Interruptible| B[Build Work-in-Progress Tree]\n    B --\x3e C[Diff & Mark Updates]\n    C --\x3e D[Commit Phase]\n    D --\x3e|Non-Interruptible| E[Apply DOM Updates]\n    E --\x3e F[Run Effects]\n\n    style A fill:#cce5ff\n    style D fill:#ccffcc"}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"6-fiber-architecture",children:"6. Fiber Architecture"}),"\n",(0,l.jsx)(n.p,{children:"Fiber is React's reconciliation engine since version 16. It's a reimplementation of the core algorithm."}),"\n",(0,l.jsx)(n.h3,{id:"what-is-a-fiber",children:"What is a Fiber?"}),"\n",(0,l.jsx)(n.p,{children:"A Fiber is a JavaScript object representing a unit of work. Each React element has a corresponding Fiber node."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"// Simplified Fiber node structure\n{\n  type: 'div',              // Component type\n  key: null,                // Key from props\n  props: { children: [...] }, // Props\n  stateNode: DOMNode,       // Actual DOM node\n  return: parentFiber,      // Parent fiber\n  child: firstChildFiber,   // First child\n  sibling: nextSiblingFiber, // Next sibling\n  alternate: oldFiber,      // Previous version\n  effectTag: 'UPDATE',      // What needs to be done\n  nextEffect: nextFiber     // Linked list of effects\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"fiber-tree-structure",children:"Fiber Tree Structure"}),"\n",(0,l.jsx)(n.mermaid,{value:"graph TD\n    A[App Fiber] --\x3e|child| B[div Fiber]\n    B --\x3e|child| C[h1 Fiber]\n    C --\x3e|sibling| D[p Fiber]\n\n    B --\x3e|return| A\n    C --\x3e|return| B\n    D --\x3e|return| B\n\n    A -.->|alternate| A2[Old App Fiber]\n    B -.->|alternate| B2[Old div Fiber]\n\n    style A fill:#e1f5ff\n    style B fill:#fff4e1\n    style C fill:#ffe1f0\n    style D fill:#ffe1f0\n    style A2 fill:#f0f0f0\n    style B2 fill:#f0f0f0"}),"\n",(0,l.jsx)(n.h3,{id:"work-loop",children:"Work Loop"}),"\n",(0,l.jsxs)(n.p,{children:["Fiber enables ",(0,l.jsx)(n.strong,{children:"time-slicing"}),": breaking work into chunks and spreading it across multiple frames."]}),"\n",(0,l.jsx)(n.mermaid,{value:"graph LR\n    A[Work Loop] --\x3e B{More Work?}\n    B --\x3e|Yes| C{Time Remaining?}\n    C --\x3e|Yes| D[Process Next Fiber]\n    C --\x3e|No| E[Yield to Browser]\n    E --\x3e A\n    D --\x3e A\n    B --\x3e|No| F[Commit Phase]\n\n    style E fill:#ffffcc\n    style F fill:#ccffcc"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"// Simplified work loop concept\nfunction workLoop(deadline) {\n  let shouldYield = false;\n\n  while (nextUnitOfWork && !shouldYield) {\n    nextUnitOfWork = performUnitOfWork(nextUnitOfWork);\n    shouldYield = deadline.timeRemaining() < 1;\n  }\n\n  if (nextUnitOfWork) {\n    // More work to do, schedule next frame\n    requestIdleCallback(workLoop);\n  } else {\n    // All work done, commit to DOM\n    commitRoot();\n  }\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"why-fiber",children:"Why Fiber?"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Before Fiber (Stack Reconciler)"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Synchronous, recursive"}),"\n",(0,l.jsx)(n.li,{children:"Once started, couldn't pause"}),"\n",(0,l.jsx)(n.li,{children:"Long updates blocked the browser"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"With Fiber"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Asynchronous, can pause/resume"}),"\n",(0,l.jsx)(n.li,{children:"Prioritize urgent updates (user input)"}),"\n",(0,l.jsx)(n.li,{children:"Better perceived performance"}),"\n"]}),"\n",(0,l.jsx)(n.mermaid,{value:'graph TD\n    subgraph "Stack Reconciler"\n    A1[Start Update] --\x3e B1[Process Entire Tree]\n    B1 --\x3e C1[Commit]\n    C1 --\x3e D1[Browser Can Render]\n    end\n\n    subgraph "Fiber Reconciler"\n    A2[Start Update] --\x3e B2[Process Chunk 1]\n    B2 --\x3e C2[Yield to Browser]\n    C2 --\x3e D2[Process Chunk 2]\n    D2 --\x3e E2[Yield to Browser]\n    E2 --\x3e F2[Commit]\n    end\n\n    style B1 fill:#ffcccc\n    style C2 fill:#ccffcc\n    style E2 fill:#ccffcc'}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"7-putting-it-all-together",children:"7. Putting It All Together"}),"\n",(0,l.jsx)(n.h3,{id:"complete-react-update-cycle",children:"Complete React Update Cycle"}),"\n",(0,l.jsx)(n.mermaid,{value:"graph TD\n    A[User Action / setState] --\x3e B[Schedule Update]\n    B --\x3e C[Render Phase Begins]\n    C --\x3e D[Component Returns JSX]\n    D --\x3e E[JSX \u2192 React.createElement]\n    E --\x3e F[Create React Elements]\n    F --\x3e G[Build Fiber Tree]\n    G --\x3e H[Diff with Current Tree]\n    H --\x3e I[Mark Effects UPDATE/DELETE/INSERT]\n    I --\x3e J{More Work?}\n    J --\x3e|Yes| K{Has Time?}\n    K --\x3e|Yes| C\n    K --\x3e|No| L[Yield to Browser]\n    L --\x3e C\n    J --\x3e|No| M[Commit Phase]\n    M --\x3e N[Apply DOM Mutations]\n    N --\x3e O[Run useLayoutEffect]\n    O --\x3e P[Browser Paints]\n    P --\x3e Q[Run useEffect]\n\n    style A fill:#ffcccc\n    style G fill:#cce5ff\n    style H fill:#ffffcc\n    style N fill:#ccffcc\n    style P fill:#ccffcc"}),"\n",(0,l.jsx)(n.h3,{id:"real-world-example",children:"Real-World Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-jsx",children:"function TodoApp() {\n  const [todos, setTodos] = useState([\n    { id: 1, text: 'Learn React' },\n    { id: 2, text: 'Build App' }\n  ]);\n\n  const addTodo = () => {\n    setTodos([...todos, { id: 3, text: 'Deploy' }]);\n  };\n\n  return (\n    <div>\n      <ul>\n        {todos.map(todo => (\n          <li key={todo.id}>{todo.text}</li>\n        ))}\n      </ul>\n      <button onClick={addTodo}>Add</button>\n    </div>\n  );\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["When ",(0,l.jsx)(n.code,{children:"addTodo"})," is clicked:"]})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"setState"})," triggers update"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"JSX"})," transformed to ",(0,l.jsx)(n.code,{children:"React.createElement"})," calls"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Virtual DOM"})," new tree created with 3 todos"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Diffing"})," compares old (2 todos) vs new (3 todos)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Keys"})," identify that todos 1 & 2 unchanged"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Fiber"})," marks effect: INSERT new ",(0,l.jsx)(n.code,{children:"<li>"})," with id=3"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Commit"})," inserts single DOM node"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Result"})," efficient update, only one DOM insertion"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"8-performance-implications",children:"8. Performance Implications"}),"\n",(0,l.jsx)(n.h3,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"1. Use Keys for Lists"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-jsx",children:"// \u2705 Efficient reconciliation\n<ul>\n  {items.map(item => <li key={item.id}>{item.name}</li>)}\n</ul>\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"2. Avoid Inline Functions/Objects in JSX"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-jsx",children:"// \u274c Creates new function every render\n<button onClick={() => handleClick(id)}>Click</button>\n\n// \u2705 Memoized callback\nconst handleClickMemoized = useCallback(() => handleClick(id), [id]);\n<button onClick={handleClickMemoized}>Click</button>\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"3. Prevent Unnecessary Re-renders"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-jsx",children:"// \u2705 Memoize expensive components\nconst MemoizedChild = React.memo(Child);\n\n// \u2705 Use React.memo with custom comparison\nconst MemoizedItem = React.memo(Item, (prev, next) => {\n  return prev.id === next.id && prev.text === next.text;\n});\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"4. Keep Component Type Stable"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-jsx",children:"// \u274c Creates new component type every render\nfunction Parent() {\n  const Child = () => <div>Child</div>;\n  return <Child />;\n}\n\n// \u2705 Stable component reference\nconst Child = () => <div>Child</div>;\nfunction Parent() {\n  return <Child />;\n}\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"JSX"})," is syntactic sugar for ",(0,l.jsx)(n.code,{children:"React.createElement"})," calls"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"React Elements"})," are plain JavaScript objects describing UI"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Virtual DOM"})," is a lightweight representation enabling efficient updates"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Diffing"})," uses heuristics (type comparison, keys) for O(n) performance"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Fiber"})," enables interruptible rendering and better performance"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Keys"})," are critical for efficient list reconciliation"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Reconciliation"})," compares trees and produces minimal DOM updates"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Understanding these internals helps you write more performant React applications and debug issues more effectively."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);