"use strict";(self.webpackChunkdev_enigma=self.webpackChunkdev_enigma||[]).push([[21113],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var i=s(96540);const r={},o=i.createContext(r);function l(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(o.Provider,{value:n},e.children)}},65644:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>a});var i=s(74848),r=s(28453);const o={},l="JavaScript Event Loop - Complete Guide",t={id:"Interview Prep 2026/JavaScript Event Loop - Complete Guide",title:"JavaScript Event Loop - Complete Guide",description:"Table of Contents",source:"@site/docs/08-Interview Prep 2026/JavaScript Event Loop - Complete Guide.mdx",sourceDirName:"08-Interview Prep 2026",slug:"/Interview Prep 2026/JavaScript Event Loop - Complete Guide",permalink:"/docs/Interview Prep 2026/JavaScript Event Loop - Complete Guide",draft:!1,unlisted:!1,editUrl:"https://github.com/carefree-ladka/docs/08-Interview Prep 2026/JavaScript Event Loop - Complete Guide.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"JavaScript Advanced Features: Map, Set, WeakMap, WeakSet, Symbol & Generators",permalink:"/docs/Interview Prep 2026/JavaScript Advanced Features: Map, Set, WeakMap, WeakSet, Symbol & Generators"},next:{title:"JavaScript Execution Context & Lexical Environment - Complete Guide",permalink:"/docs/Interview Prep 2026/JavaScript Execution Context & Lexical Environment - Complete Guide"}},c={},a=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"What is the Event Loop?",id:"what-is-the-event-loop",level:2},{value:"Key Point:",id:"key-point",level:3},{value:"Why the Event Loop Exists",id:"why-the-event-loop-exists",level:2},{value:"Core Components",id:"core-components",level:2},{value:"1. Call Stack",id:"1-call-stack",level:3},{value:"2. Web APIs (Browser Environment)",id:"2-web-apis-browser-environment",level:3},{value:"3. Task Queues",id:"3-task-queues",level:3},{value:"(A) Macrotask Queue (Lower Priority)",id:"a-macrotask-queue-lower-priority",level:4},{value:"(B) Microtask Queue (Higher Priority) \ud83d\udd25",id:"b-microtask-queue-higher-priority-",level:4},{value:"4. Event Loop",id:"4-event-loop",level:3},{value:"Execution Order",id:"execution-order",level:2},{value:"Priority Hierarchy:",id:"priority-hierarchy",level:3},{value:"Simple Examples",id:"simple-examples",level:2},{value:"Example 1: Basic Event Loop",id:"example-1-basic-event-loop",level:3},{value:"Execution Steps:",id:"execution-steps",level:4},{value:"Output:",id:"output",level:4},{value:"Example 2: Multiple Promises",id:"example-2-multiple-promises",level:3},{value:"Output:",id:"output-1",level:4},{value:"Microtask Queue Behavior",id:"microtask-queue-behavior",level:2},{value:"Critical Rule: Microtasks Drain Completely",id:"critical-rule-microtasks-drain-completely",level:3},{value:"Output:",id:"output-2",level:4},{value:"Why?",id:"why",level:4},{value:"Trap Question:",id:"trap-question",level:3},{value:"Output:",id:"output-3",level:4},{value:"Rendering and Event Loop",id:"rendering-and-event-loop",level:2},{value:"Example:",id:"example",level:3},{value:"Performance Implication:",id:"performance-implication",level:3},{value:"setTimeout(fn, 0) - Common Misconception",id:"settimeoutfn-0---common-misconception",level:2},{value:"Misconception: It runs immediately",id:"misconception-it-runs-immediately",level:3},{value:"Reality: It&#39;s still asynchronous and has delays",id:"reality-its-still-asynchronous-and-has-delays",level:3},{value:"Why setTimeout(fn, 0) is NOT immediate:",id:"why-settimeoutfn-0-is-not-immediate",level:3},{value:"Event Loop in Node.js",id:"event-loop-in-nodejs",level:2},{value:"Node.js Event Loop Phases:",id:"nodejs-event-loop-phases",level:3},{value:"Node.js Priority Order:",id:"nodejs-priority-order",level:3},{value:"Node.js Example:",id:"nodejs-example",level:3},{value:"Starvation Problem",id:"starvation-problem",level:2},{value:"What is Starvation?",id:"what-is-starvation",level:3},{value:"Example:",id:"example-1",level:3},{value:"Why This is Bad:",id:"why-this-is-bad",level:3},{value:"Solution:",id:"solution",level:3},{value:"Event Loop vs Execution Context",id:"event-loop-vs-execution-context",level:2},{value:"Relationship:",id:"relationship",level:3},{value:"Real-World React Relevance",id:"real-world-react-relevance",level:2},{value:"1. State Updates are Batched",id:"1-state-updates-are-batched",level:3},{value:"2. useEffect Runs in Microtasks",id:"2-useeffect-runs-in-microtasks",level:3},{value:"3. Long Microtasks Delay Paint",id:"3-long-microtasks-delay-paint",level:3},{value:"4. Heavy Synchronous Work Blocks Rendering",id:"4-heavy-synchronous-work-blocks-rendering",level:3},{value:"Common Interview Questions",id:"common-interview-questions",level:2},{value:"Q: Are Promises asynchronous?",id:"q-are-promises-asynchronous",level:3},{value:"Q: Why does Promise run before setTimeout?",id:"q-why-does-promise-run-before-settimeout",level:3},{value:"Q: Can the Event Loop run when the Call Stack is not empty?",id:"q-can-the-event-loop-run-when-the-call-stack-is-not-empty",level:3},{value:"Q: What happens if microtasks keep creating new microtasks?",id:"q-what-happens-if-microtasks-keep-creating-new-microtasks",level:3},{value:"Q: Does the browser render between microtasks?",id:"q-does-the-browser-render-between-microtasks",level:3},{value:"Mental Model",id:"mental-model",level:2},{value:"The Golden Rule:",id:"the-golden-rule",level:3},{value:"Visual Mental Model:",id:"visual-mental-model",level:3},{value:"Tricky Interview Snippets",id:"tricky-interview-snippets",level:2},{value:"Snippet 1:",id:"snippet-1",level:3},{value:"Snippet 2:",id:"snippet-2",level:3},{value:"Snippet 3 (Advanced):",id:"snippet-3-advanced",level:3},{value:"Killer Interview One-Liner",id:"killer-interview-one-liner",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Further Learning",id:"further-learning",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"javascript-event-loop---complete-guide",children:"JavaScript Event Loop - Complete Guide"})}),"\n",(0,i.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#what-is-the-event-loop",children:"What is the Event Loop?"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#why-the-event-loop-exists",children:"Why the Event Loop Exists"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#core-components",children:"Core Components"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#execution-order",children:"Execution Order"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#simple-examples",children:"Simple Examples"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#microtask-queue-behavior",children:"Microtask Queue Behavior"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#rendering-and-event-loop",children:"Rendering and Event Loop"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#settimeoutfn-0---common-misconception",children:"setTimeout(fn, 0) - Common Misconception"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#event-loop-in-nodejs",children:"Event Loop in Node.js"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#starvation-problem",children:"Starvation Problem"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#event-loop-vs-execution-context",children:"Event Loop vs Execution Context"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#real-world-react-relevance",children:"Real-World React Relevance"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#common-interview-questions",children:"Common Interview Questions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#mental-model",children:"Mental Model"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#tricky-interview-snippets",children:"Tricky Interview Snippets"})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"what-is-the-event-loop",children:"What is the Event Loop?"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"Event Loop"})," is the mechanism that allows JavaScript (which is single-threaded) to perform non-blocking asynchronous operations by coordinating the Call Stack, task queues, and host APIs (like browser APIs or Node.js APIs)."]}),"\n",(0,i.jsx)(n.h3,{id:"key-point",children:"Key Point:"}),"\n",(0,i.jsx)(n.p,{children:"JavaScript can only execute one thing at a time, but the Event Loop enables concurrent behavior through asynchronous callbacks."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"why-the-event-loop-exists",children:"Why the Event Loop Exists"}),"\n",(0,i.jsx)(n.p,{children:"JavaScript has fundamental constraints:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"One Call Stack"})," - can only execute one function at a time"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Single-threaded"})," - no parallel execution of JavaScript code"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"However, browsers and Node.js must handle:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u23f1\ufe0f Timers (",(0,i.jsx)(n.code,{children:"setTimeout"}),", ",(0,i.jsx)(n.code,{children:"setInterval"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["\ud83c\udf10 Network calls (",(0,i.jsx)(n.code,{children:"fetch"}),", AJAX)"]}),"\n",(0,i.jsx)(n.li,{children:"\ud83d\uddb1\ufe0f DOM events (clicks, scrolls)"}),"\n",(0,i.jsx)(n.li,{children:"\u2728 Promises"}),"\n",(0,i.jsx)(n.li,{children:"\ud83d\udce1 I/O operations"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution:"})," The Event Loop makes asynchronous operations possible without blocking the main thread."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"core-components",children:"Core Components"}),"\n",(0,i.jsx)(n.p,{children:"Understanding these components is essential for mastering the Event Loop:"}),"\n",(0,i.jsx)(n.h3,{id:"1-call-stack",children:"1. Call Stack"}),"\n",(0,i.jsxs)(n.p,{children:["The Call Stack executes JavaScript execution contexts using a ",(0,i.jsx)(n.strong,{children:"LIFO"})," (Last In First Out) structure."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"function a() { b(); }\nfunction b() { console.log('b'); }\na();\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Call Stack Visualization:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"| b()  |  \u2190 Top (executes first)\n| a()  |\n| GEC  |  \u2190 Bottom (Global Execution Context)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-web-apis-browser-environment",children:"2. Web APIs (Browser Environment)"}),"\n",(0,i.jsxs)(n.p,{children:["These APIs are ",(0,i.jsx)(n.strong,{children:"not part of the JavaScript engine"})," but are provided by the host environment:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"setTimeout"})," / ",(0,i.jsx)(n.code,{children:"setInterval"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"fetch"})," / ",(0,i.jsx)(n.code,{children:"XMLHttpRequest"})]}),"\n",(0,i.jsxs)(n.li,{children:["DOM events (",(0,i.jsx)(n.code,{children:"addEventListener"}),")"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"requestAnimationFrame"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"MutationObserver"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"In Node.js:"})," File system, network operations, timers, etc."]}),"\n",(0,i.jsx)(n.h3,{id:"3-task-queues",children:"3. Task Queues"}),"\n",(0,i.jsx)(n.p,{children:"JavaScript has two types of task queues with different priorities:"}),"\n",(0,i.jsx)(n.h4,{id:"a-macrotask-queue-lower-priority",children:"(A) Macrotask Queue (Lower Priority)"}),"\n",(0,i.jsxs)(n.p,{children:["Also called the ",(0,i.jsx)(n.strong,{children:"Task Queue"})," or ",(0,i.jsx)(n.strong,{children:"Callback Queue"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"setTimeout"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"setInterval"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"setImmediate"})," (Node.js only)"]}),"\n",(0,i.jsx)(n.li,{children:"I/O callbacks"}),"\n",(0,i.jsx)(n.li,{children:"UI rendering tasks"}),"\n",(0,i.jsx)(n.li,{children:"User interaction events"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"b-microtask-queue-higher-priority-",children:"(B) Microtask Queue (Higher Priority) \ud83d\udd25"}),"\n",(0,i.jsxs)(n.p,{children:["Also called the ",(0,i.jsx)(n.strong,{children:"Job Queue"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Promise.then"})," / ",(0,i.jsx)(n.code,{children:"catch"})," / ",(0,i.jsx)(n.code,{children:"finally"})]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"queueMicrotask()"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"MutationObserver"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"process.nextTick()"})," (Node.js - highest priority)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"4-event-loop",children:"4. Event Loop"}),"\n",(0,i.jsx)(n.p,{children:"The Event Loop continuously monitors and coordinates:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Is the Call Stack empty?"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Run ALL microtasks"})," (drain the microtask queue)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Take ONE macrotask"})," from the macrotask queue"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Render"})," (if needed in browser)"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Repeat"})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"execution-order",children:"Execution Order"}),"\n",(0,i.jsxs)(n.p,{children:["This is the ",(0,i.jsx)(n.strong,{children:"MOST IMPORTANT"})," concept to understand:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"1. Synchronous Code (Call Stack)\n   \u2193\n2. Microtask Queue (drain completely)\n   \u2193\n3. Macrotask Queue (execute ONE task)\n   \u2193\n4. Render (if needed)\n   \u2193\n5. Repeat from step 2\n"})}),"\n",(0,i.jsx)(n.h3,{id:"priority-hierarchy",children:"Priority Hierarchy:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Highest Priority:  Call Stack (synchronous code)\n                   \u2193\nHigh Priority:     Microtasks (Promises)\n                   \u2193\nLow Priority:      Macrotasks (setTimeout)\n                   \u2193\nLowest:            Rendering\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"simple-examples",children:"Simple Examples"}),"\n",(0,i.jsx)(n.h3,{id:"example-1-basic-event-loop",children:"Example 1: Basic Event Loop"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"console.log('A');\n\nsetTimeout(() => console.log('B'), 0);\n\nPromise.resolve().then(() => console.log('C'));\n\nconsole.log('D');\n"})}),"\n",(0,i.jsx)(n.h4,{id:"execution-steps",children:"Execution Steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"'A'"})," \u2192 logged immediately (synchronous)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"setTimeout"})," \u2192 callback sent to ",(0,i.jsx)(n.strong,{children:"Macrotask Queue"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Promise.then"})," \u2192 callback sent to ",(0,i.jsx)(n.strong,{children:"Microtask Queue"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"'D'"})," \u2192 logged immediately (synchronous)"]}),"\n",(0,i.jsxs)(n.li,{children:["Call Stack empty \u2192 drain ",(0,i.jsx)(n.strong,{children:"Microtask Queue"})," \u2192 ",(0,i.jsx)(n.code,{children:"'C'"})," logged"]}),"\n",(0,i.jsxs)(n.li,{children:["Take one ",(0,i.jsx)(n.strong,{children:"Macrotask"})," \u2192 ",(0,i.jsx)(n.code,{children:"'B'"})," logged"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"output",children:"Output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"A\nD\nC\nB\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-2-multiple-promises",children:"Example 2: Multiple Promises"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"console.log('Start');\n\nsetTimeout(() => console.log('Timeout'), 0);\n\nPromise.resolve()\n  .then(() => console.log('Promise 1'))\n  .then(() => console.log('Promise 2'));\n\nconsole.log('End');\n"})}),"\n",(0,i.jsx)(n.h4,{id:"output-1",children:"Output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Start\nEnd\nPromise 1\nPromise 2\nTimeout\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Why?"})," All microtasks run before any macrotask."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"microtask-queue-behavior",children:"Microtask Queue Behavior"}),"\n",(0,i.jsx)(n.h3,{id:"critical-rule-microtasks-drain-completely",children:"Critical Rule: Microtasks Drain Completely"}),"\n",(0,i.jsxs)(n.p,{children:["The microtask queue ",(0,i.jsx)(n.strong,{children:"must be completely empty"})," before moving to macrotasks. This can lead to interesting behavior:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"setTimeout(() => console.log('timeout'));\n\nPromise.resolve().then(() => {\n  console.log('promise');\n  Promise.resolve().then(() => console.log('inner promise'));\n});\n"})}),"\n",(0,i.jsx)(n.h4,{id:"output-2",children:"Output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"promise\ninner promise\ntimeout\n"})}),"\n",(0,i.jsx)(n.h4,{id:"why",children:"Why?"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["First ",(0,i.jsx)(n.code,{children:"Promise.then"})," runs (microtask)"]}),"\n",(0,i.jsxs)(n.li,{children:["It logs ",(0,i.jsx)(n.code,{children:"'promise'"})]}),"\n",(0,i.jsxs)(n.li,{children:["It creates another microtask (",(0,i.jsx)(n.code,{children:"'inner promise'"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["That new microtask runs ",(0,i.jsx)(n.strong,{children:"immediately"})," (queue must drain)"]}),"\n",(0,i.jsxs)(n.li,{children:["Only then does ",(0,i.jsx)(n.code,{children:"setTimeout"})," run (macrotask)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"trap-question",children:"Trap Question:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"setTimeout(() => console.log('1'));\n\nPromise.resolve().then(() => {\n  console.log('2');\n  setTimeout(() => console.log('3'));\n});\n\nPromise.resolve().then(() => console.log('4'));\n"})}),"\n",(0,i.jsx)(n.h4,{id:"output-3",children:"Output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"2\n4\n1\n3\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Explanation:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"All promises resolve first (microtasks)"}),"\n",(0,i.jsxs)(n.li,{children:["Then first ",(0,i.jsx)(n.code,{children:"setTimeout"})," runs (macrotask from beginning)"]}),"\n",(0,i.jsxs)(n.li,{children:["Then second ",(0,i.jsx)(n.code,{children:"setTimeout"})," runs (macrotask added during microtask)"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"rendering-and-event-loop",children:"Rendering and Event Loop"}),"\n",(0,i.jsxs)(n.p,{children:["In browsers, ",(0,i.jsx)(n.strong,{children:"rendering"})," happens:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"After a macrotask completes"}),"\n",(0,i.jsx)(n.li,{children:"After all microtasks are drained"}),"\n",(0,i.jsx)(n.li,{children:"Before the next macrotask"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"example",children:"Example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const element = document.getElementById('box');\n\nsetTimeout(() => {\n  element.style.display = 'block';\n  // Rendering happens AFTER this callback finishes\n}, 0);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"performance-implication",children:"Performance Implication:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// BAD - Blocks rendering\nfor (let i = 0; i < 1000; i++) {\n  Promise.resolve().then(() => heavyCalculation());\n}\n\n// BETTER - Allows rendering between tasks\nfor (let i = 0; i < 1000; i++) {\n  setTimeout(() => heavyCalculation(), 0);\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"settimeoutfn-0---common-misconception",children:"setTimeout(fn, 0) - Common Misconception"}),"\n",(0,i.jsx)(n.h3,{id:"misconception-it-runs-immediately",children:"Misconception: It runs immediately"}),"\n",(0,i.jsxs)(n.p,{children:["\u274c ",(0,i.jsx)(n.strong,{children:"FALSE"})]}),"\n",(0,i.jsx)(n.h3,{id:"reality-its-still-asynchronous-and-has-delays",children:"Reality: It's still asynchronous and has delays"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"console.log('Start');\nsetTimeout(() => console.log('Timeout'), 0);\nconsole.log('End');\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Start\nEnd\nTimeout\n"})}),"\n",(0,i.jsx)(n.h3,{id:"why-settimeoutfn-0-is-not-immediate",children:"Why setTimeout(fn, 0) is NOT immediate:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Minimum delay"})," - Browsers enforce a 4ms minimum delay (after 5 nested calls)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Waits for Call Stack"})," - Must wait for synchronous code to finish"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Waits for Microtasks"})," - All promises must resolve first"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Queue position"})," - Must wait for other macrotasks ahead of it"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"event-loop-in-nodejs",children:"Event Loop in Node.js"}),"\n",(0,i.jsxs)(n.p,{children:["Node.js has a more complex event loop with ",(0,i.jsx)(n.strong,{children:"multiple phases"}),":"]}),"\n",(0,i.jsx)(n.h3,{id:"nodejs-event-loop-phases",children:"Node.js Event Loop Phases:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u250c\u2500>\u2502           timers          \u2502 (setTimeout, setInterval)\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u2502     pending callbacks     \u2502 (I/O callbacks)\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u2502       idle, prepare       \u2502 (internal use)\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u2502           poll            \u2502 (retrieve new I/O events)\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u2502           check           \u2502 (setImmediate)\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2514\u2500\u2500\u2502      close callbacks      \u2502 (socket.on('close'))\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h3,{id:"nodejs-priority-order",children:"Node.js Priority Order:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Highest:  process.nextTick()\n          \u2193\nHigh:     Promise (microtasks)\n          \u2193\nMedium:   setTimeout / setInterval\n          \u2193\nLow:      setImmediate\n"})}),"\n",(0,i.jsx)(n.h3,{id:"nodejs-example",children:"Node.js Example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"setTimeout(() => console.log('setTimeout'), 0);\nsetImmediate(() => console.log('setImmediate'));\nPromise.resolve().then(() => console.log('Promise'));\nprocess.nextTick(() => console.log('nextTick'));\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"nextTick\nPromise\nsetTimeout\nsetImmediate\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"starvation-problem",children:"Starvation Problem"}),"\n",(0,i.jsx)(n.h3,{id:"what-is-starvation",children:"What is Starvation?"}),"\n",(0,i.jsx)(n.p,{children:"When microtasks keep adding more microtasks, preventing macrotasks from ever running."}),"\n",(0,i.jsx)(n.h3,{id:"example-1",children:"Example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"function recurse() {\n  Promise.resolve().then(recurse);\n}\nrecurse();\n\n// UI completely freezes! \u274c\n"})}),"\n",(0,i.jsx)(n.h3,{id:"why-this-is-bad",children:"Why This is Bad:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Microtask queue ",(0,i.jsx)(n.strong,{children:"never empties"})]}),"\n",(0,i.jsxs)(n.li,{children:["Macrotasks ",(0,i.jsx)(n.strong,{children:"never run"})]}),"\n",(0,i.jsxs)(n.li,{children:["Browser ",(0,i.jsx)(n.strong,{children:"cannot render"})]}),"\n",(0,i.jsxs)(n.li,{children:["UI becomes ",(0,i.jsx)(n.strong,{children:"completely unresponsive"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"solution",children:"Solution:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"function recurse() {\n  setTimeout(recurse, 0); // Use macrotask instead\n}\nrecurse();\n\n// UI can still render between tasks \u2705\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"event-loop-vs-execution-context",children:"Event Loop vs Execution Context"}),"\n",(0,i.jsx)(n.p,{children:"These are different but related concepts:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Concept"}),(0,i.jsx)(n.th,{children:"Role"}),(0,i.jsx)(n.th,{children:"Storage"}),(0,i.jsx)(n.th,{children:"Lifetime"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Execution Context"})}),(0,i.jsx)(n.td,{children:"Runs code"}),(0,i.jsx)(n.td,{children:"Call Stack"}),(0,i.jsx)(n.td,{children:"Temporary (popped after execution)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Call Stack"})}),(0,i.jsx)(n.td,{children:"Stores execution contexts"}),(0,i.jsx)(n.td,{children:"Memory"}),(0,i.jsx)(n.td,{children:"Cleared when empty"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Event Loop"})}),(0,i.jsx)(n.td,{children:"Schedules tasks"}),(0,i.jsx)(n.td,{children:"Coordinates queues"}),(0,i.jsx)(n.td,{children:"Runs continuously"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"relationship",children:"Relationship:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Event Loop \u2192 Pushes callbacks to Call Stack\nCall Stack \u2192 Executes code in Execution Contexts\nExecution Context \u2192 Runs JavaScript code\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"real-world-react-relevance",children:"Real-World React Relevance"}),"\n",(0,i.jsx)(n.p,{children:"Understanding the Event Loop is crucial for React performance:"}),"\n",(0,i.jsx)(n.h3,{id:"1-state-updates-are-batched",children:"1. State Updates are Batched"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"function handleClick() {\n  setState1(value1); // Batched\n  setState2(value2); // Batched\n  setState3(value3); // Batched\n  // Single re-render after all updates\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-useeffect-runs-in-microtasks",children:"2. useEffect Runs in Microtasks"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"useEffect(() => {\n  // This runs as a microtask after render\n  console.log('Effect runs');\n}, []);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-long-microtasks-delay-paint",children:"3. Long Microtasks Delay Paint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// BAD - Blocks rendering\nPromise.resolve().then(() => {\n  for (let i = 0; i < 1000000; i++) {\n    // Heavy computation\n  }\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-heavy-synchronous-work-blocks-rendering",children:"4. Heavy Synchronous Work Blocks Rendering"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// BAD - Freezes UI\nfunction handleClick() {\n  for (let i = 0; i < 1000000; i++) {\n    // Blocks the main thread\n  }\n}\n\n// BETTER - Break into chunks\nfunction handleClick() {\n  let i = 0;\n  function chunk() {\n    for (let j = 0; j < 1000 && i < 1000000; j++, i++) {\n      // Process small chunk\n    }\n    if (i < 1000000) {\n      setTimeout(chunk, 0); // Allow rendering between chunks\n    }\n  }\n  chunk();\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"common-interview-questions",children:"Common Interview Questions"}),"\n",(0,i.jsx)(n.h3,{id:"q-are-promises-asynchronous",children:"Q: Are Promises asynchronous?"}),"\n",(0,i.jsxs)(n.p,{children:["\u274c ",(0,i.jsx)(n.strong,{children:"No"})," - The Promise constructor executes synchronously"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Yes"})," - Their ",(0,i.jsx)(n.code,{children:".then()"}),", ",(0,i.jsx)(n.code,{children:".catch()"}),", ",(0,i.jsx)(n.code,{children:".finally()"})," callbacks are asynchronous (microtasks)"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"console.log('1');\nnew Promise((resolve) => {\n  console.log('2'); // Synchronous!\n  resolve();\n}).then(() => console.log('3')); // Asynchronous (microtask)\nconsole.log('4');\n\n// Output: 1, 2, 4, 3\n"})}),"\n",(0,i.jsx)(n.h3,{id:"q-why-does-promise-run-before-settimeout",children:"Q: Why does Promise run before setTimeout?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Answer:"})," Microtasks (Promises) have ",(0,i.jsx)(n.strong,{children:"higher priority"})," than macrotasks (setTimeout). The microtask queue must be completely drained before any macrotask runs."]}),"\n",(0,i.jsx)(n.h3,{id:"q-can-the-event-loop-run-when-the-call-stack-is-not-empty",children:"Q: Can the Event Loop run when the Call Stack is not empty?"}),"\n",(0,i.jsxs)(n.p,{children:["\u274c ",(0,i.jsx)(n.strong,{children:"No"})," - The Event Loop only moves tasks from queues to the Call Stack when the Call Stack is ",(0,i.jsx)(n.strong,{children:"completely empty"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"q-what-happens-if-microtasks-keep-creating-new-microtasks",children:"Q: What happens if microtasks keep creating new microtasks?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Answer:"})," The microtask queue will never empty, causing ",(0,i.jsx)(n.strong,{children:"starvation"})," - macrotasks never run, rendering is blocked, and the UI freezes."]}),"\n",(0,i.jsx)(n.h3,{id:"q-does-the-browser-render-between-microtasks",children:"Q: Does the browser render between microtasks?"}),"\n",(0,i.jsxs)(n.p,{children:["\u274c ",(0,i.jsx)(n.strong,{children:"No"})," - Rendering only happens after ",(0,i.jsx)(n.strong,{children:"all"})," microtasks complete."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"mental-model",children:"Mental Model"}),"\n",(0,i.jsx)(n.h3,{id:"the-golden-rule",children:"The Golden Rule:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"1. Run all synchronous code (Call Stack)\n   \u2193\n2. Empty the Call Stack\n   \u2193\n3. Drain ALL microtasks (Promises)\n   \u2193\n4. Run ONE macrotask (setTimeout)\n   \u2193\n5. Render (if in browser)\n   \u2193\n6. Repeat from step 3\n"})}),"\n",(0,i.jsx)(n.h3,{id:"visual-mental-model",children:"Visual Mental Model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         Call Stack (JS Code)        \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502   Execution Context (EC)    \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502\n               \u2193 (when empty)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      Microtask Queue (Priority)      \u2502\n\u2502  \u2022 Promise.then                      \u2502\n\u2502  \u2022 queueMicrotask                    \u2502\n\u2502  \u2022 MutationObserver                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502 (drain completely)\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      Macrotask Queue (Regular)       \u2502\n\u2502  \u2022 setTimeout                        \u2502\n\u2502  \u2022 setInterval                       \u2502\n\u2502  \u2022 I/O                               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502 (take ONE)\n               \u2193\n         [Render if needed]\n               \u2502\n               \u2193\n          [Repeat \u21bb]\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"tricky-interview-snippets",children:"Tricky Interview Snippets"}),"\n",(0,i.jsx)(n.h3,{id:"snippet-1",children:"Snippet 1:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"console.log('1');\n\nsetTimeout(() => console.log('2'), 0);\n\nPromise.resolve().then(() => {\n  console.log('3');\n  setTimeout(() => console.log('4'), 0);\n});\n\nPromise.resolve().then(() => console.log('5'));\n\nconsole.log('6');\n"})}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("strong",{children:"Click for output and explanation"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"1\n6\n3\n5\n2\n4\n"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Explanation:"})}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"1"})," - synchronous"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"6"})," - synchronous"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"3"})," - first microtask"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"5"})," - second microtask"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"2"})," - first macrotask (from beginning)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"4"})," - second macrotask (added during microtask)"]}),"\n"]})]}),"\n",(0,i.jsx)(n.h3,{id:"snippet-2",children:"Snippet 2:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"setTimeout(() => console.log('A'), 0);\n\nPromise.resolve()\n  .then(() => console.log('B'))\n  .then(() => console.log('C'));\n\nsetTimeout(() => console.log('D'), 0);\n\nPromise.resolve().then(() => console.log('E'));\n\nconsole.log('F');\n"})}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("strong",{children:"Click for output and explanation"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"F\nB\nE\nC\nA\nD\n"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Explanation:"})}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"F"})," - synchronous"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"B"})," - first microtask (first promise chain)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"E"})," - second microtask (second promise)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"C"})," - third microtask (continuation of first chain)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"A"})," - first macrotask"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"D"})," - second macrotask"]}),"\n"]})]}),"\n",(0,i.jsx)(n.h3,{id:"snippet-3-advanced",children:"Snippet 3 (Advanced):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"console.log('Start');\n\nsetTimeout(() => {\n  console.log('Timeout 1');\n  Promise.resolve().then(() => console.log('Promise in Timeout 1'));\n}, 0);\n\nPromise.resolve()\n  .then(() => {\n    console.log('Promise 1');\n    setTimeout(() => console.log('Timeout in Promise 1'), 0);\n  })\n  .then(() => console.log('Promise 2'));\n\nsetTimeout(() => console.log('Timeout 2'), 0);\n\nconsole.log('End');\n"})}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("strong",{children:"Click for output and explanation"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Start\nEnd\nPromise 1\nPromise 2\nTimeout 1\nPromise in Timeout 1\nTimeout 2\nTimeout in Promise 1\n"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Explanation:"})}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Start"}),", ",(0,i.jsx)(n.code,{children:"End"})," - synchronous"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Promise 1"}),", ",(0,i.jsx)(n.code,{children:"Promise 2"})," - drain microtask queue"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Timeout 1"})," - first macrotask"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Promise in Timeout 1"})," - microtask from macrotask (runs before next macrotask)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Timeout 2"})," - second macrotask (from beginning)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Timeout in Promise 1"})," - third macrotask (added during first promise)"]}),"\n"]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"killer-interview-one-liner",children:"Killer Interview One-Liner"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:'"The event loop coordinates the call stack and task queues to enable non-blocking async execution, always prioritizing microtasks over macrotasks, ensuring the call stack is empty before processing any queued tasks."'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 JavaScript is ",(0,i.jsx)(n.strong,{children:"single-threaded"})," but achieves concurrency through the Event Loop"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Microtasks"})," (Promises) ",(0,i.jsx)(n.strong,{children:"always"})," run before ",(0,i.jsx)(n.strong,{children:"macrotasks"})," (setTimeout)"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 The ",(0,i.jsx)(n.strong,{children:"Call Stack must be empty"})," before the Event Loop processes queues"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 Microtasks ",(0,i.jsx)(n.strong,{children:"drain completely"})," before taking one macrotask"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Rendering"})," happens after macrotasks and microtasks"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 Infinite microtasks cause ",(0,i.jsx)(n.strong,{children:"UI starvation"})]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"setTimeout(fn, 0)"})," is ",(0,i.jsx)(n.strong,{children:"not immediate"})," - it's still asynchronous"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 Understanding the Event Loop is crucial for ",(0,i.jsx)(n.strong,{children:"React performance"})," and ",(0,i.jsx)(n.strong,{children:"debugging async issues"})]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"further-learning",children:"Further Learning"}),"\n",(0,i.jsx)(n.p,{children:"To deepen your understanding, explore:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Event Loop + Browser Rendering Pipeline"})," - how painting and compositing work"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Request Animation Frame"})," - optimal timing for animations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Web Workers"})," - true parallelism in JavaScript"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Async/Await internals"})," - how they use the Event Loop"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance monitoring"})," - using Chrome DevTools Performance tab"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);